# 4th.GRC pytest configuration
#
# Key behaviors:
# - Run tests under the `tests`/ directory.
# - Enforce strict marker usage.
# - Stop after the first failing test (`--maxfail=1`).
# - Collect coverage for the `policyengine` package with branch coverage.
# - Show a short summary of skipped/xfailed tests (`-ra`).
#
# You can override options on the CLI as usual, e.g.:
#   pytest -m "integration"        # run only integration tests
#   pytest -m "not integration"    # run all except integration

[pytest]
addopts =
    -ra
    -q
    --strict-markers
    --maxfail=1
    --disable-warnings
    --cov=policyengine
    --cov-branch
    --cov-report=term-missing

testpaths = tests
xfail_strict = true

filterwarnings =
    # Keep the test output clean from noisy third-party deprecation warnings.
    ignore::DeprecationWarning

markers =
    # Marks tests as integration (deselect with '-m "not integration"')
    integration: marks tests as integration (deselect with '-m "not integration'")
